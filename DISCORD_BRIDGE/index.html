
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the usrp-go integration and services">
      
      
        <meta name="author" content="dbehnke">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.11">
    
    
      
        <title>Discord Bridge for Amateur Radio - usrp-go Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#discord-bridge-for-amateur-radio" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="usrp-go Documentation" class="md-header__button md-logo" aria-label="usrp-go Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            usrp-go Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Discord Bridge for Amateur Radio
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="usrp-go Documentation" class="md-nav__button md-logo" aria-label="usrp-go Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    usrp-go Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../audio-router/" class="md-nav__link">
        Audio Router
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    Key Features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
    <nav class="md-nav" aria-label="Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#software-requirements" class="md-nav__link">
    Software Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amateur-radio-requirements" class="md-nav__link">
    Amateur Radio Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discord-requirements" class="md-nav__link">
    Discord Requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-discord-bot" class="md-nav__link">
    1. Create Discord Bot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-install-dependencies" class="md-nav__link">
    2. Install Dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-environment-setup" class="md-nav__link">
    3. Environment Setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-bridge-operation" class="md-nav__link">
    Basic Bridge Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-commands" class="md-nav__link">
    Manual Commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    Architecture
  </a>
  
    <nav class="md-nav" aria-label="Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-flow" class="md-nav__link">
    Data Flow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bridge-configuration" class="md-nav__link">
    Bridge Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#audio-settings" class="md-nav__link">
    Audio Settings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-configuration" class="md-nav__link">
    Network Configuration
  </a>
  
    <nav class="md-nav" aria-label="Network Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default-ports" class="md-nav__link">
    Default Ports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#firewall-considerations" class="md-nav__link">
    Firewall Considerations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discord-bot-commands" class="md-nav__link">
    Discord Bot Commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amateur-radio-integration" class="md-nav__link">
    Amateur Radio Integration
  </a>
  
    <nav class="md-nav" aria-label="Amateur Radio Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#allstarlink-integration" class="md-nav__link">
    AllStarLink Integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-usrp-packet-testing" class="md-nav__link">
    Manual USRP Packet Testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#legal-and-operational-considerations" class="md-nav__link">
    Legal and Operational Considerations
  </a>
  
    <nav class="md-nav" aria-label="Legal and Operational Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#amateur-radio-compliance" class="md-nav__link">
    Amateur Radio Compliance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discord-terms-of-service" class="md-nav__link">
    Discord Terms of Service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#discord-connection-issues" class="md-nav__link">
    Discord Connection Issues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#audio-quality-issues" class="md-nav__link">
    Audio Quality Issues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-issues" class="md-nav__link">
    Network Issues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-error-messages" class="md-nav__link">
    Common Error Messages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    Performance Considerations
  </a>
  
    <nav class="md-nav" aria-label="Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#latency" class="md-nav__link">
    Latency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu-usage" class="md-nav__link">
    CPU Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-usage" class="md-nav__link">
    Memory Usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-scenarios" class="md-nav__link">
    Example Scenarios
  </a>
  
    <nav class="md-nav" aria-label="Example Scenarios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-repeater-extension" class="md-nav__link">
    1. Repeater Extension
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-net-control-station" class="md-nav__link">
    2. Net Control Station
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-emergency-communications" class="md-nav__link">
    3. Emergency Communications
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    Development
  </a>
  
    <nav class="md-nav" aria-label="Development">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-the-bridge" class="md-nav__link">
    Testing the Bridge
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extending-functionality" class="md-nav__link">
    Extending Functionality
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    Contributing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="discord-bridge-for-amateur-radio">Discord Bridge for Amateur Radio</h1>
<p>This document explains how to use the Discord bridge to connect amateur radio USRP systems with Discord voice channels, enabling real-time voice communication between amateur radio operators and Discord users.</p>
<h2 id="overview">Overview</h2>
<p>The Discord bridge provides <strong>bidirectional audio conversion</strong> between:
- <strong>Amateur Radio</strong>: USRP protocol packets (8kHz mono PCM)
- <strong>Discord Voice</strong>: Discord voice channels (48kHz stereo Opus)</p>
<p>This enables amateur radio repeaters and networks to extend their reach through Discord voice channels while maintaining proper amateur radio protocols and identification.</p>
<h2 id="key-features">Key Features</h2>
<p>‚úÖ <strong>Real-time Voice Bridge</strong>: Live audio between amateur radio and Discord<br />
‚úÖ <strong>Automatic Audio Conversion</strong>: 8kHz ‚Üî 48kHz resampling with format conversion<br />
‚úÖ <strong>PTT Integration</strong>: Push-to-talk control from amateur radio to Discord<br />
‚úÖ <strong>Voice Activity Detection</strong>: Automatic transmission triggering from Discord<br />
‚úÖ <strong>Amateur Radio Compliant</strong>: Proper USRP packet formatting and callsign handling<br />
‚úÖ <strong>High Performance</strong>: Low-latency audio processing with efficient buffering  </p>
<h2 id="requirements">Requirements</h2>
<h3 id="software-requirements">Software Requirements</h3>
<ul>
<li><strong>Go 1.19+</strong> for building the bridge</li>
<li><strong>FFmpeg with libopus</strong> for audio conversion</li>
<li><strong>Discord Bot</strong> with voice channel permissions</li>
</ul>
<h3 id="amateur-radio-requirements">Amateur Radio Requirements</h3>
<ul>
<li><strong>Amateur radio license</strong> for USRP operation</li>
<li><strong>USRP-compatible system</strong> (AllStarLink, app_rpt, etc.)</li>
<li><strong>Valid amateur radio callsign</strong> for identification</li>
</ul>
<h3 id="discord-requirements">Discord Requirements</h3>
<ul>
<li><strong>Discord Server</strong> with voice channels</li>
<li><strong>Bot Token</strong> with voice permissions</li>
<li><strong>Voice Channel Access</strong> for the bot</li>
</ul>
<h2 id="setup">Setup</h2>
<h3 id="1-create-discord-bot">1. Create Discord Bot</h3>
<ol>
<li>Go to <a href="https://discord.com/developers/applications">Discord Developer Portal</a></li>
<li>Create a new application</li>
<li>Go to "Bot" section and create a bot</li>
<li>Copy the bot token (keep it secret!)</li>
<li>Enable the following permissions:</li>
<li><code>Connect</code> - Join voice channels</li>
<li><code>Speak</code> - Send audio to voice channels</li>
<li><code>Use Voice Activity</code> - Voice activity detection</li>
</ol>
<h3 id="2-install-dependencies">2. Install Dependencies</h3>
<pre><code class="language-bash"># Install FFmpeg with Opus support
# macOS
brew install ffmpeg

# Ubuntu/Debian
sudo apt install ffmpeg libopus-dev

# Verify Opus support
ffmpeg -encoders | grep opus
</code></pre>
<h3 id="3-environment-setup">3. Environment Setup</h3>
<pre><code class="language-bash"># Required: Discord bot token
export DISCORD_TOKEN=&quot;your_bot_token_here&quot;

# Optional: Specific Discord server and channel
export DISCORD_GUILD=&quot;your_guild_id&quot;
export DISCORD_CHANNEL=&quot;your_voice_channel_id&quot;

# Required for amateur radio: Your callsign
export AMATEUR_CALLSIGN=&quot;N0CALL&quot;  # Replace with your callsign
</code></pre>
<h2 id="usage">Usage</h2>
<h3 id="basic-bridge-operation">Basic Bridge Operation</h3>
<pre><code class="language-bash"># Test Discord bot connection
make run-discord-test

# Run the full bridge
make run-discord-bridge
</code></pre>
<h3 id="manual-commands">Manual Commands</h3>
<pre><code class="language-bash"># Test Discord bot (verify token and permissions)
go run cmd/discord-bridge/main.go test

# Run USRP-Discord bridge
go run cmd/discord-bridge/main.go bridge

# Run USRP test server (for testing without real amateur radio)
go run cmd/discord-bridge/main.go server
</code></pre>
<h2 id="architecture">Architecture</h2>
<pre><code>Amateur Radio ‚Üê‚Üí USRP Packets ‚Üê‚Üí Audio Bridge ‚Üê‚Üí Discord Bot ‚Üê‚Üí Discord Voice
</code></pre>
<h3 id="data-flow">Data Flow</h3>
<p><strong>Amateur Radio ‚Üí Discord:</strong>
1. Amateur radio system sends USRP voice packets (8kHz mono PCM)
2. Bridge receives packets via UDP
3. Audio converted from 8kHz mono to 48kHz stereo
4. Discord bot sends audio to voice channel</p>
<p><strong>Discord ‚Üí Amateur Radio:</strong>
1. Discord bot receives voice from users
2. Voice activity detection triggers transmission
3. Audio resampled from 48kHz stereo to 8kHz mono
4. Bridge creates USRP packets with proper amateur radio formatting
5. Packets sent to amateur radio system via UDP</p>
<h2 id="configuration">Configuration</h2>
<h3 id="bridge-configuration">Bridge Configuration</h3>
<pre><code class="language-go">config := discord.DefaultBridgeConfig()
config.DiscordToken = &quot;your_token&quot;
config.DiscordGuild = &quot;guild_id&quot;
config.DiscordChannel = &quot;channel_id&quot;
config.CallSign = &quot;N0CALL&quot;
config.VoiceThreshold = 1000    // Voice activation threshold
config.PTTTimeout = 2 * time.Second
</code></pre>
<h3 id="audio-settings">Audio Settings</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>USRP/Amateur Radio</th>
<th>Discord</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sample Rate</td>
<td>8000 Hz</td>
<td>48000 Hz</td>
</tr>
<tr>
<td>Channels</td>
<td>1 (mono)</td>
<td>2 (stereo)</td>
</tr>
<tr>
<td>Format</td>
<td>16-bit PCM</td>
<td>Opus compressed</td>
</tr>
<tr>
<td>Frame Size</td>
<td>20ms (160 samples)</td>
<td>20ms (960 samples)</td>
</tr>
</tbody>
</table>
<h2 id="network-configuration">Network Configuration</h2>
<h3 id="default-ports">Default Ports</h3>
<ul>
<li><strong>USRP Input</strong>: UDP port 12345 (configurable)</li>
<li><strong>Amateur Radio Output</strong>: UDP (configured in your amateur radio system)</li>
</ul>
<h3 id="firewall-considerations">Firewall Considerations</h3>
<p>Ensure these ports are accessible:
- UDP ports for USRP communication
- HTTPS (443) for Discord API
- WebSocket connections for Discord voice</p>
<h2 id="discord-bot-commands">Discord Bot Commands</h2>
<p>Once the bot is running in a Discord server, users can interact with it:</p>
<pre><code>!join      - Bot joins the user's current voice channel
!leave     - Bot leaves the voice channel  
!status    - Shows connection status
</code></pre>
<h2 id="amateur-radio-integration">Amateur Radio Integration</h2>
<h3 id="allstarlink-integration">AllStarLink Integration</h3>
<pre><code class="language-bash"># In your AllStarLink node configuration:
# Send USRP packets to bridge
usrp_node=1999,127.0.0.1:12345,NONE

# Receive USRP packets from bridge  
# Configure your node to listen on the bridge's output port
</code></pre>
<h3 id="manual-usrp-packet-testing">Manual USRP Packet Testing</h3>
<pre><code class="language-bash"># Generate test USRP packets
make run-discord-server

# This creates realistic amateur radio voice patterns for testing
</code></pre>
<h2 id="legal-and-operational-considerations">Legal and Operational Considerations</h2>
<h3 id="amateur-radio-compliance">Amateur Radio Compliance</h3>
<p>‚ö†Ô∏è <strong>Important</strong>: This bridge is for <strong>amateur radio use only</strong></p>
<ul>
<li><strong>Valid License Required</strong>: You must hold a valid amateur radio license</li>
<li><strong>Proper Identification</strong>: All transmissions must include proper station identification</li>
<li><strong>Band Plan Compliance</strong>: Use only authorized amateur radio frequencies</li>
<li><strong>Third Party Traffic</strong>: Follow your country's third-party traffic regulations</li>
</ul>
<h3 id="discord-terms-of-service">Discord Terms of Service</h3>
<ul>
<li>Ensure Discord use complies with their Terms of Service</li>
<li>Consider Discord's community guidelines for voice channels</li>
<li>Be respectful of Discord users who may not be familiar with amateur radio procedures</li>
</ul>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="discord-connection-issues">Discord Connection Issues</h3>
<pre><code class="language-bash"># Test bot token
make run-discord-test

# Check bot permissions in Discord server
# Ensure bot has &quot;Connect&quot; and &quot;Speak&quot; permissions in voice channels
</code></pre>
<h3 id="audio-quality-issues">Audio Quality Issues</h3>
<pre><code class="language-bash"># Check FFmpeg installation
ffmpeg -version
ffmpeg -encoders | grep opus

# Test audio conversion separately
make run-audio-test
</code></pre>
<h3 id="network-issues">Network Issues</h3>
<pre><code class="language-bash"># Test USRP packet reception
sudo netstat -ulnp | grep :12345

# Check firewall settings
# Ensure UDP ports are not blocked
</code></pre>
<h3 id="common-error-messages">Common Error Messages</h3>
<p><strong>"Discord token is required"</strong>
- Set the DISCORD_TOKEN environment variable
- Verify the token is correct</p>
<p><strong>"FFmpeg not available"</strong>
- Install FFmpeg with Opus support
- Check PATH includes ffmpeg binary</p>
<p><strong>"Voice connection not ready"</strong>
- Ensure bot has voice channel permissions
- Check if the voice channel exists and is accessible</p>
<h2 id="performance-considerations">Performance Considerations</h2>
<h3 id="latency">Latency</h3>
<ul>
<li><strong>Typical latency</strong>: 50-200ms end-to-end</li>
<li><strong>Discord voice</strong>: ~40-80ms</li>
<li><strong>Audio processing</strong>: ~10-30ms</li>
<li><strong>Network</strong>: Variable based on connection</li>
</ul>
<h3 id="cpu-usage">CPU Usage</h3>
<ul>
<li><strong>Bridge process</strong>: ~5-10% on modern hardware</li>
<li><strong>FFmpeg conversion</strong>: ~2-5% per active stream</li>
<li><strong>Discord bot</strong>: ~1-3%</li>
</ul>
<h3 id="memory-usage">Memory Usage</h3>
<ul>
<li><strong>Total footprint</strong>: ~50-100MB</li>
<li><strong>Audio buffers</strong>: ~10MB</li>
<li><strong>Discord connection</strong>: ~20-40MB</li>
</ul>
<h2 id="example-scenarios">Example Scenarios</h2>
<h3 id="1-repeater-extension">1. Repeater Extension</h3>
<p>Connect a local amateur radio repeater to Discord:</p>
<pre><code class="language-bash"># Amateur Radio Repeater ‚Üê‚Üí USRP Bridge ‚Üê‚Üí Discord Voice Channel
export AMATEUR_CALLSIGN=&quot;W1AW&quot;
export DISCORD_GUILD=&quot;your_club_server&quot;  
export DISCORD_CHANNEL=&quot;repeater_link&quot;

make run-discord-bridge
</code></pre>
<h3 id="2-net-control-station">2. Net Control Station</h3>
<p>Use Discord for net control and amateur radio for participants:</p>
<pre><code class="language-bash"># Net Control (Discord) ‚Üê‚Üí Bridge ‚Üê‚Üí Amateur Radio Net
export AMATEUR_CALLSIGN=&quot;KC1NCS&quot;
make run-discord-bridge
</code></pre>
<h3 id="3-emergency-communications">3. Emergency Communications</h3>
<p>Backup communications during emergencies:</p>
<pre><code class="language-bash"># Emergency Responders (Discord) ‚Üê‚Üí Bridge ‚Üê‚Üí Amateur Radio Emergency Net
export AMATEUR_CALLSIGN=&quot;EM1RGY&quot;
make run-discord-bridge
</code></pre>
<h2 id="development">Development</h2>
<h3 id="testing-the-bridge">Testing the Bridge</h3>
<pre><code class="language-bash"># Run complete test suite
go test ./pkg/discord/ -v

# Test with real Discord connection
make run-discord-test

# Test with simulated amateur radio traffic
make run-discord-server
</code></pre>
<h3 id="extending-functionality">Extending Functionality</h3>
<p>The bridge is designed to be extensible:</p>
<ul>
<li><strong>Custom audio processing</strong>: Modify resampling algorithms</li>
<li><strong>Additional protocols</strong>: Add support for other amateur radio protocols</li>
<li><strong>Enhanced PTT control</strong>: Implement hardware PTT interfaces</li>
<li><strong>Logging and monitoring</strong>: Add comprehensive logging for amateur radio compliance</li>
</ul>
<h2 id="contributing">Contributing</h2>
<p>This is amateur radio software - contributions welcome!</p>
<ol>
<li>Ensure changes maintain amateur radio compliance</li>
<li>Test with real amateur radio systems when possible</li>
<li>Document any changes that affect legal compliance</li>
<li>Follow Go best practices and include tests</li>
</ol>
<h2 id="license">License</h2>
<p>MIT License - See LICENSE file for details.</p>
<p>This software is provided for <strong>amateur radio experimentation</strong> under FCC Part 97 regulations and similar international amateur radio regulations.</p>
<hr />
<p><strong>73, Good DX!</strong> üìªüéÆ</p>
<p><em>"Bridging the gap between amateur radio and modern communications"</em></p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://www.ecfr.gov/current/title-47/chapter-I/subchapter-D/part-97">FCC Part 97 - Amateur Radio Service</a></li>
<li><a href="https://discord.com/developers/docs">Discord Developer Documentation</a></li>
<li><a href="https://wiki.allstarlink.org/">AllStarLink Documentation</a></li>
<li><a href="https://github.com/dbehnke/usrp-go">USRP Protocol Specification</a></li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.fac441b0.min.js"></script>
      
    
  </body>
</html>